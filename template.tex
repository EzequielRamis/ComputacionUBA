\documentclass[12pt, a4paper, spanish]{article}

\def\spanishoptions{es-noquoting,es-nolist}
\usepackage{babel}
\usepackage{subfiles}
\usepackage{tikz}
\usepackage{mathtools} % Incluye amsmath
\usepackage{amssymb} % Agrega \mathbb
\usepackage{cancel} % Agrega macro \cancel
\usepackage{hyperref} % Agrega links clickeables

\usepackage{environ}
\makeatletter
\newsavebox{\measure@tikzpicture}
\NewEnviron{scaletikzpicturetowidth}[1]{
	\def\tikz@width{#1}
	\def\tikzscale{1}\begin{lrbox}{\measure@tikzpicture}
		\BODY
	\end{lrbox}
	\pgfmathparse{#1/\wd\measure@tikzpicture}
	\edef\tikzscale{\pgfmathresult}
	\BODY
}
\makeatother
\everymath{\displaystyle}
