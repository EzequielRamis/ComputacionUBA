\documentclass[12pt, a4paper, spanish]{article}

\usepackage{subfiles}
\def\spanishoptions{es-noquoting,es-nolist}
\usepackage[spanish]{babel}
\usepackage{hyperref}
\usepackage{mathtools}
\usepackage{cancel}
\usepackage{array}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{tikz}
\usepackage{environ}
\hypersetup{
	colorlinks,
	citecolor=black,
	filecolor=black,
	linkcolor=black,
	urlcolor=black
}

\makeatletter
\newsavebox{\measure@tikzpicture}
\NewEnviron{scaletikzpicturetowidth}[1]{
	\def\tikz@width{#1}
	\def\tikzscale{1}\begin{lrbox}{\measure@tikzpicture}
		\BODY
	\end{lrbox}
	\pgfmathparse{#1/\wd\measure@tikzpicture}
	\edef\tikzscale{\pgfmathresult}
	\BODY
}
\makeatother
\everymath{\displaystyle}
